<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Javascript Integration - BrainSINS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="assets/css/docs.css" rel="stylesheet">
    <link href="assets/js/google-code-prettify/prettify.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="assets/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="assets/ico/favicon.png">

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-25583205-3']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>

  <body data-spy="scroll" data-target=".bs-docs-sidebar">

    <!-- Navbar
    ================================================== -->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="http://www.brainsins.com/en" target="_blank">BrainSINS</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="">
                <a href="./index.html">Developers Home</a>
              </li>
              <li class="">
                <a href="./getting-started.html">Get started</a>
              </li>
              <li class="">
                <a href="./plugins.html">Plugins</a>
              </li>
              <li class="active">
                <a href="./javascript.html">JavaScript</a>
              </li>
              <li class="">
                <a href="http://support.brainsins.com" target="_blank">Support</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

<!-- Subhead
================================================== -->
<header class="jumbotron subhead">
  <div class="container">
    <h1>JavaScript</h1>
    <p class="lead">BrainSINS JavaScript integration; suitable for any eCommerce website
    
  </div>
</header>

  <div class="container">

    <div class="alert alert-info bs-alert-old-docs">
      <strong>Heads up!</strong> If your online store is based on Prestashop, you may it easier to use our Prestashop module: <a href="./plugins.html">Check our Plugins section.</a>
    </div>

    <!-- Docs nav
    ================================================== -->
    <div class="row">
      <div class="span3 bs-docs-sidebar">
        <ul class="nav nav-list bs-docs-sidenav">
          <li><a href="#overview"><i class="icon-chevron-right"></i> Overview</a></li>
          <li><a href="#api"><i class="icon-chevron-right"></i> Adding our JavaScript API</a></li>
          <li><a href="#json"><i class="icon-chevron-right"></i> JSON Tagging</a></li>
          <li><a href="#json-data"><i class="icon-chevron-right"></i> JSON Data Fields</a></li>
          <li><a href="#recommendations"><i class="icon-chevron-right"></i> Product Recommendations</a></li>
        </ul>
      </div>
      <div class="span9">

        <!-- Overview 
        ================================================== -->
        <section id="overview">
          <div class="page-header">
            <h1>BrainSINS JavaScript Integration</h1>
          </div>

          <h3>First upload the products feed</h3>
          <p>As stated in our "Get started" section, BrainSINS needs to get access to your products feed. Our plugins usually produce a products feed in XML format, but if your online store doesn't make use of a standard CMS you need to upload BrainSINS a products feed. For more information, you can check our the <a href="./product-feed.html">documentation page related to the products feed</a> supported by BrainSINS.</p>

          <h3>An overview</h3>
          <p>After uploading the products feed, you can continue with our JavaScript integration. As you will see in this guide, our JavaScript integration requires you to include a JavaScript file from our CDN and a set of JavaScript tags based on a custom JSON format, that will inform BrainSINS about your customer's behavior in your online store.</p>

          <p>Once we receive your customer's behavior, we are able to analyze that data and interact with your users by means of product recommendations, email retargeting or behavioral targeting; providing a personalized shopping experience to fulfill your customer's desires and your needs as a business owner.</p>
           </section>

        <!-- JavaScript API
        ================================================== -->
        <section id="api">
          <div class="page-header">
            <h1>Include our JavaScript API <small>brainsins_v2.js</small></h1>
          </div>
		  <p>The first step is to include our JavaScript file into everypage of your online store, in the HEAD section:</p>
		
		<pre class="prettyprint linenums">
&lt;!-- BrainSINS Code Starts --&gt;
&lt;script type=&quot;text/javascript&quot;&gt;brainsins_token = TOKEN&quot;;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; async=&quot;&quot; src=&quot;//d2xkqxdy6ewr93.cloudfront.net/brainsins_v3.js&quot;&gt;&lt;/script&gt;
&lt;!-- BrainSINS Code Ends --&gt;</pre>
          
		<p>The variable <strong>TOKEN should be replaced by your unique BrainSINS client ID</strong>. You can find that ID <a href="https://clients.brainsins.com/" target="_blank">accessing our management tool</a>: Settings->Account info. This id has the following structure: BS-0000000000-1.</p>

		<p>For instance, if your client code is “BS-1234567890-1″, the could you should generate into the HEAD section would be:</p>

     	<pre class="prettyprint linenums">
&lt;!-- BrainSINS Code Starts --&gt;
&lt;script type=&quot;text/javascript&quot;&gt;brainsins_token = &quot;BS-1234567890-1&quot;;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; async=&quot;&quot; src=&quot;//d2xkqxdy6ewr93.cloudfront.net/brainsins_v3.js&quot;&gt;&lt;/script&gt;
&lt;!-- BrainSINS Code Ends --&gt;</pre>
 </section>

<!-- JSON
================================================== -->
<section id="json">
  <div class="page-header">
    <h1>JSON Tagging</h1>
  </div>

  <p>In order to send BrainSINS the user's activity, we have developed a JSON format that allows you to send any type of user behavior. Next you will find the full JSON specification, but don't worry if you see too much information, because we only require you to send some information for each type of page in your online store (homepage, product page...).</p>
  
  <p>If you prefer to understand what information pieces need to be implemented in each page type, you can access to our specific <a href="./javascript-by-page.html">guide that shows JSON example for each possible page</a> type in your online store.</p>

<h2>BrainSINS JSON Specification</h2>

 <p>The following code represents our JSON specification. After the code you'll find a brief explanation for each data field.</p>
     	<pre class="prettyprint linenums">		
&lt;script type=&quot;text/javascript&quot;&gt;
var BrainSINSData = {
   pageType: PAGE_TYPE,
   language: LANGUAGE,
   productId: ID_PRODUCT,
   totalAmount: TOTAL,
   categories: CATEGORIES,
   userEmail: EMAIL,
   userNewsletter: WANTS_NEWSLETTER,
   cart: [
      {
         id: ID,
         quantity: QUANTITY
      },
      {
         id: ID,
         quantity: QUANTITY
      },
      ...
   ],
   recommenders: [
      {
         recommenderId: ID,
         location: LOCATION,
         position: POSITION,
         filter: FILTER
      },
      {
         recommenderId: ID,
         location: LOCATION,
         position: POSITION,
         filter: FILTER
      },
      ...	   
   ]
};
&lt;/script&gt;</pre>
 </section>
<!-- JSON Data Fields
================================================== -->
<section id="json-data">
  <div class="page-header">
    <h1>JSON Data Fields</h1>
  </div>

 <p>In our JSON data model, we have several data attributes that records the user activity. Next, we will describe each data field, and in what circumstances, page types or desired user behaviors you need to fulfill them.</p>

	<table class="table table-bordered table-striped">
     <thead>
      <tr>
        <th style="width: 100px;">Data field</th>
        <th style="width: 50px;">Page type</th>
        <th>Description</th>
      </tr>
     </thead>
     <tbody>
      <tr>
        <td>pagetype</td>
        <td>all</td>
        <td>This data field is used to communicate BrainSINS what type of page the user is browsing. You need to replace PAGE_TYPE by one of the following values:<br /><br />
	<ul>
		<li><strong>product</strong>: When the user is browsing a product page.</li>
		<li><strong>home</strong>: When the user is browsing the homepage.</li>
		<li><strong>category</strong>: When the user is browsing a category listing.</li>
		<li><strong>cart</strong>: When the user is at the cart page.</li>
		<li><strong>checkout</strong>: When the user is at the first page of the checkout process. Sometimes this page is the cart page, so in that situation you must use the "checkout" page type.</li>
		<li><strong>thankYou</strong>: When the user has completed the purchase.</li>
		<li><strong>login</strong>: When the user has been redirected to a specific page after the log-in process.</li>
		<li><strong>logout</strong>: When the user has been redirected to a specific page after the log-out process.</li>
	</ul>
	As an example, if the user is browing the homepage, this JSON line would contain:
	<br /><br />
	<pre class="prettyprint linenums">pagetype: "home",</pre>
	</td>
      </tr>
	<tr>
        <td>language</td>
        <td>all</td>
        <td>If your online storefront manages different languages, you can specify in this field in what language the user is browsing your website. That is needed to show the recommended products details in the proper language. If your have different languages in your online store, you must consider that you need to configure your products feed to send us the information in every language you manage. As an example, imagine that a user is visiting your online store and has chosen to read the contents in Spanish. If you have configured the Spanish language in your catalog using the code "es", you'd need to add the following line to the JSON:
		<br /><br />
		<pre class="prettyprint linenums">language: "es",</pre>
	</td>
    </tr>
	<tr>
        <td>productId</td>
        <td>product</td>
        <td>When the user is browsing a product page, the productId field contains the internal id of the product. This id must match the if that you use for that product in the products feed. As an example, if the user is browsing the page for the product with id 676, the JSON code should include:
		<br /><br />
		<pre class="prettyprint linenums">pagetype: "product",
productId: 676,</pre>
	</td>
    </tr>
	<tr>
        <td>totalAmount</td>
        <td>thankYou</td>
        <td>When the user finishes a purchase, totalAmount is used to state the final amount for the given purchase. We use this data mainly for analytical purposes. As an example, if the user has finished a purchase of $1,249.32, you should send us that information as a float:
		<br /><br />
		<pre class="prettyprint linenums">pagetype: "thankYou",
totalAmount: 1249.32,</pre>
	</td>
    </tr>
	<tr>
        <td>categories</td>
        <td>category</td>
        <td>Categories is used to send BrainSINS a given category or set of categories. Mostly, you'll be needing this field to send the category the user is browsing in a given moment. As an example, if the user is browsing the category listing for shirts in your online store, you'd include the following lines in our JSON:
		<br /><br />
		<pre class="prettyprint linenums">pagetype: "category",
categories: "shirts",</pre>
If the user is not browsing the category listing, you can also include the category field in order to restrain recommendations results according to that category. Although you may learn more about filtering recommendations results in the documentation regarding this topic, you can check the following example to understand how this works. Imagine that you want to show product recommendations in your homepage but you need that the recommended products belong to the categories christmas or holidays. You should include the following code:
<br /><br /><pre class="prettyprint linenums">pagetype: "home",
categories: "christmas, holidays",
recommenders: [
   {
      recommenderId: 13,
      location: "recommendation-home",
      position: "replace",
      filter: "any"	
   }
],</pre>
In the previous example you can learn how to manage several categories (they must be comma separated), and how to filter recommendation results. More about this topic in the section regarding product recommendations.
<br /><br />You must consider that BrainSINS associates categories to the products according to the information you send in your products feed. So you must be consistent in the use of categories.
	</td>
    </tr>
	<tr>
        <td>userEmail</td>
        <td>any</td>
        <td>We are able to gather user emails and associate them to browsing sessions, so you can configure eMail retargeting rules to recover abandoned carts, or even send personalized newsletters. When you need to send us a user email because the user has logged-in in your website, or they have introduced their email in a newsletter subscription form, you should include the user's email in this field. Most times, you'll be sending the email in the login page, so the following example is made based on this assumption. But if you want to send us a user email from any other type of page, you only need to add the field userEmail containing the user's email address.
		<br /><br />
		<pre class="prettyprint linenums">pagetype: "login",
userEmail: "user@domain.com",</pre>
	</td>
    </tr>
	<tr>
        <td>userNewsletter</td>
        <td>any</td>
        <td>This field is a modifier to userEmail, and must be used only to notify that a given user doesn't want to receive any eMail communications. As an example, if a user with the email address user@domain.com registers at our site but does not want to receive any eMail communication, you should include the following code:
		<br /><br />
		<pre class="prettyprint linenums">pagetype: "login",
userEmail: "user@domain.com",
userNewsletter: 0,</pre>
	</td>
    </tr>
		<tr>
	        <td>cart</td>
	        <td>cart</td>
	        <td>The cart field is used to send BrainSINS information about the cart's content of a given user. Mostly you will be using this field when the user is in the cart page, visualizing their cart's content. If a given user has added 1 unit of the product with id=13 and 3 units of the product with id=27, you should include the following code:
			<br /><br />
			<pre class="prettyprint linenums">pagetype: "cart",
cart: [
   {
      id: 13,
      quantity: 1
   },
   {
      id: 27,
      quantity: 3	
   }
]</pre>
This field contains a list of N pairs {id, quantity}, being N the number of different products in the user's cart. Although the main use of this field is expected for the cart page, you can include this field wherever you want to track the carts content of a given user. In some cases, you'd like to synchronize the cart contents when the checkout starts, in that situation you'd need to include the following code (assuming the same cart's contents of the previous example):
			<br /><br />
<pre class="prettyprint linenums">pagetype: "checkout",
cart: [
   {
      id: 13,
      quantity: 1
   },
   {
      id: 27,
      quantity: 3	
   }
]</pre>
		</td>
	    </tr>
		<tr>
	        <td>recommenders</td>
	        <td>any</td>
	        <td>This field is used when you want to show product recommendations in a given page type. As our solutions ables you to configure a lot of details, we have devoted a full section of this documentation to product recommendations. So if you want to understand how to fill this field according to your needs, please, read the next section.
		</td>
	    </tr>
	</table>
 </section>
        <!-- Product recommendations
        ================================================== -->
        <section id="recommendations">
          <div class="page-header">
            <h1>Product Recommendations</h1>
          </div>

		  <p>Product recommendations are a powerful tool for eCommerce marketers, as they able to increase the overall conversion and average order value. In this section you'd learn how to configure BrainSINS to show product recommendations in your online store.</p>
          <h2>Recommenders Fields</h2>
          <p>The specification of the previous chapter does not include all the details regarding how to ask BrainSINS to show product recommendations. The field you need to include in our JSON format to show product recommendations is called recommenders, a list of recommenders configurations that allows you to show several product recommendations block in any given page of your online store. Each position of the list may contain the following fields.</p>

		<table class="table table-bordered table-striped">
	     <thead>
	      <tr>
	        <th style="width: 100px;">Data field</th>
	        <th style="width: 50px;">Required</th>
	        <th>Description</th>
	      </tr>
	     </thead>
	     <tbody>
	      <tr>
	        <td>recommenderId</td>
	        <td>yes</td>
	        <td>This is a numerical id of the recommender to be shown. You can choose the recommender behavior you desire in our <a href="https://clients.brainsins.com" target="_blank">management console</a>, and then get the id of the recommender of your choice to include it in this field.
		</td>
	      </tr>
		<tr>
	        <td>location</td>
	        <td>yes</td>
	        <td>Location refers to the id of the DIV you want to take as reference to include the recommendation block in your online store. We use that DIV as a reference to include the recommended products, so you can place them wherever you want.
		</td>
	      </tr>
		<tr>
	        <td>position</td>
	        <td>no</td>
	        <td>This field is a modifier to the previous field (location). When you have chosen a current DIV's id in your online store as a reference to include the recommended products, you can specify to BrainSINS if you want the recommendations to be placed before or after that div, or if you want the DIV to be replaced with the recommendation block. The following image tries to show how the position field affects to where the user will see the recommendations in your online store:
		<br /><br />
		<img src="http://www.brainsins.com/en/wp-content/uploads/2013/08/recommendations-location.png" alt="How to place product recommendations" class="img-polaroid" style="width:98%"><br /><br />
		There are several positions according to wherever you want to place the recommendation block related to the chosen location:<br /><br />
		<ul>
			<li><strong>replace</strong>: Replaces the location DIV contents with the recommendation HTML block.</li>
			<li><strong>before</strong>: Places the recommendation HTML block before the location DIV.</li>
				<li><strong>first</strong>: Places the recommendation HTML block as the first node inside the location DIV.</li>
					<li><strong>last</strong>: Places the recommendation HTML block as the last node inside the location DIV.</li>
						<li><strong>after</strong>: Places the recommendation HTML block after the location DIV.</li>
			</ul>
		</td>
	      </tr>
         </tbody>
        </table>

		<h2>Recommenders Examples</h2>
          <p>Let's check some examples to fully understand how the recommendations field works.</p>

<h3>Example 1</h3>
<p>An example of how to include product recommendations in a product page (the productId is 123). We want to load the recommender with id=2, and replace the contents on the DIV with id "recommendation-block" with the recommended products:</p>
<br /><br />
<pre class="prettyprint linenums">&lt;script type=&quot;text/javascript&quot;&gt;
var BrainSINSData = {
   pageType: &quot;product&quot;,
   productId: 123,
   language: &quot;es&quot;,
   recommenders: [
      {
         recommenderId: 2,    
         location: &quot;recommendation-block&quot;,
         position: &quot;replace&quot;
      }
   ]   
};
&lt;/script&gt;
]</pre>

<h3>Example 2</h3>
<p>An example of how to include product recommendations in a category listing (the category is shirts). We want to load 2 recommendation blocks.</p>

<p>The first one is the recommender with id=13, and we want the recommendations to replace the DIV with id "recommendation-block-1". We want this recommender to show only shirts, so we have to filter the recommendations according to the category.</p>

<p>The second recommender is the recommender with id=29, and we want the recommended products to be located just before an existing DIV that have the id "product-details". We want this recommender to show any type of products, so we are not going to filter the recommendation results.</p>
<br /><br />
<pre class="prettyprint linenums">&lt;!-- BrainSINS Code Starts --&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
var BrainSINSData = {
   pageType: &quot;category&quot;,
   categories: &quot;shirts&quot;,
   language: &quot;es&quot;,
   recommenders: [
      {
         recommenderId: 13,    
         location: &quot;recommendation-block-1&quot;,
         position: &quot;replace&quot;,
         filter: &quot;any&quot;
      },
      {
         recommenderId: 29,    
         location: &quot;recommendation-block-2&quot;,
         position: &quot;before&quot;
      }
   ] 
};
&lt;/script&gt;
&lt;!-- BrainSINS Code Ends --&gt;
]</pre>

     </section>


   </div>
</div>
 </div>

<!-- Footer
================================================== -->
<footer class="footer">
  <div class="container">
    <p>Design based on <a href="http://twitter.com/twbootstrap" target="_blank">@twbootstrap</a> by <a href="http://twitter.com/brainsins_en" target="_blank">@brainsins_en</a>.</p>
    <ul class="footer-links">
      <li><a href="http://www.brainsins.com/en" target="_blank">BrainSINS Home</a></li>
      <li class="muted">&middot;</li>
      <li><a href="http://brainsins.zendesk.com" target="_blank">Support</a></li>
      <li class="muted">&middot;</li>
      <li><a href="http://www.brainsins.com/en/blog" target="_blank">BrainSINS eCommerce Blog</a></li>
    </ul>
  </div>
</footer>



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap-transition.js"></script>
    <script src="assets/js/bootstrap-alert.js"></script>
    <script src="assets/js/bootstrap-modal.js"></script>
    <script src="assets/js/bootstrap-dropdown.js"></script>
    <script src="assets/js/bootstrap-scrollspy.js"></script>
    <script src="assets/js/bootstrap-tab.js"></script>
    <script src="assets/js/bootstrap-tooltip.js"></script>
    <script src="assets/js/bootstrap-popover.js"></script>
    <script src="assets/js/bootstrap-button.js"></script>
    <script src="assets/js/bootstrap-collapse.js"></script>
    <script src="assets/js/bootstrap-carousel.js"></script>
    <script src="assets/js/bootstrap-typeahead.js"></script>
    <script src="assets/js/bootstrap-affix.js"></script>

    <script src="assets/js/holder/holder.js"></script>
    <script src="assets/js/google-code-prettify/prettify.js"></script>

    <script src="assets/js/application.js"></script>


  </body>
</html>
